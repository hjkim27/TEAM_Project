<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="questionDao">
	<insert id="insertQuestion" parameterType="HashMap">
		insert into QUESTION (NUM, ASKTYPE, NICKNAME, TITLE, CONTENT, ASKDATE)
		values (QUESTION_SEQ.nextval, #{askType}, #{nickname}, #{title}, #{content}, sysdate)
	</insert>
	<update id="updateQuestion" parameterType="HashMap">
		update QUESTION set TITLE=#{title}, CONTENT=#{content} where NUM=#{num}
	</update>
	<delete id="deleteQuestion" parameterType="Integer">
		delete from QUESTION where NUM=#{NUM}
	</delete>
	<select id="selectQuestion" parameterType="Integer" resultType="HashMap">
		select * from QUESTION where NUM=#{num}
	</select>
	<select id="selectQuestionList" resultType="HashMap">
		select TITLE, CONTENT, NUM from QUESTION where ASKTYPE!='ask' order by TITLE	
	</select>



	<update id="updateAsk" parameterType="HashMap">
		update QUESTION set ANSWER=#{answer}, ANSWERDATE=sysdate
		where NUM=#{num}
	</update>
	<select id="selectAskDetail" parameterType="Integer" resultType="questionVo">
		select * from QUESTION where NUM=#{num}
	</select>
	<select id="selectMyAsk" parameterType="String" resultType="questionVo">
		select * from QUESTION where asktype='ask' and NICKNAME=#{nickname}
	</select>
	<select id="selectAskList" parameterType="String" resultType="questionVo">
		select * from QUESTION where asktype='ask'  
		<if test='type != null and type.equals("not")'>
			and ANSWERDATE is null
		</if>
		<if test='type != null and type.equals("end")'>
			and ANSWERDATE is not null
		</if>
			order by num
	</select>
</mapper>